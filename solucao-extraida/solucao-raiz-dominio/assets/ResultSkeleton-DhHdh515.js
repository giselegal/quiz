import{r as e,u as s}from"./vendor-react-BFBzZzDX.js";import{b as a,t,a as l}from"./index-L5JVgDmK.js";import{j as i}from"./vendor-ui-osK9DzZo.js";import{C as r}from"./card-BPgU6lpB.js";import{g as o,d as m,i as d,c,B as n}from"./quiz-intro-n6LTWRwd.js";import{g as u,a as x,O as h}from"./animated-wrapper-D2XaKKoc.js";import{s as g}from"./styleConfig-DDHFfsdV.js";const f=()=>{const{quizResult:l,calculateResults:i,resetQuiz:r}=a(),[o,m]=e.useState(!1),d=s(),c=(null==l?void 0:l.primaryStyle)||null,n=(null==l?void 0:l.secondaryStyles)||[],u=e.useCallback((async e=>{try{m(!0);i(e)||t({title:"Erro ao calcular resultados",description:"Não foi possível finalizar o quiz. Tente novamente.",variant:"destructive"})}catch(s){t({title:"Erro ao submeter resultados",description:"Ocorreu um problema ao finalizar o quiz.",variant:"destructive"})}finally{m(!1)}}),[i,d]),x=e.useCallback((()=>{r()}),[r]);return e.useEffect((()=>{!l&&window.location.href.includes("/admin/editor")}),[l]),{primaryStyle:c,secondaryStyles:n,isSubmittingResults:o,startQuiz:async(e,s,a)=>{try{return{id:"1",name:e,email:s}}catch(l){throw t({title:"Erro ao iniciar o quiz",description:"Por favor, tente novamente.",variant:"destructive"}),l}},submitAnswers:async e=>{},submitResults:u,resetQuiz:x,quizResult:l}},p=({src:s,alt:a,width:t,height:l,className:r,priority:n=!1,onLoad:h,objectFit:g="cover",style:f,quality:p=85,placeholderColor:j="#f5f5f5"})=>{const[y,v]=e.useState(!1),[b,w]=e.useState(!1),[N,z]=e.useState(!1),A=e.useMemo((()=>s?o(s):void 0),[s]),S=e.useMemo((()=>s?u(s):""),[s]),E=e.useMemo((()=>{if(!s)return"";const e=t||(null==A?void 0:A.width)||void 0,a=l||(null==A?void 0:A.height)||void 0;return m(s,{quality:p,format:"auto",width:e,height:a})}),[s,t,l,A,p]),_=e.useMemo((()=>s&&t&&t>300?x(s,[t/2,t,1.5*t]):{srcSet:"",sizes:""}),[s,t]);e.useEffect((()=>{if(v(!1),z(!1),w(!1),s&&n){if(d(s))v(!0),null==h||h();else{const e=new Image;e.src=E,e.onload=()=>{v(!0),null==h||h()},e.onerror=()=>w(!0)}const e=new Image;e.src=S,e.onload=()=>z(!0)}}),[E,S,n,s,h]);const q=t&&l?`${t} / ${l}`:void 0;return i.jsxs("div",{className:c("relative overflow-hidden",r),style:{aspectRatio:q,...f},children:[!y&&!b&&i.jsxs(i.Fragment,{children:[N&&i.jsx("img",{src:S,alt:"",width:t,height:l,className:c("absolute inset-0 w-full h-full","cover"===g&&"object-cover","contain"===g&&"object-contain","fill"===g&&"object-fill","none"===g&&"object-none","scale-down"===g&&"object-scale-down","blur-sm scale-105"),"aria-hidden":"true"}),i.jsx("div",{className:"absolute inset-0 animate-pulse",style:{backgroundColor:j}})]}),i.jsx("img",{src:E,alt:(null==A?void 0:A.alt)||a,width:t,height:l,loading:n?"eager":"lazy",decoding:n?"sync":"async",fetchPriority:n?"high":"auto",srcSet:_.srcSet||void 0,sizes:_.sizes||void 0,onLoad:()=>{v(!0),null==h||h()},onError:()=>w(!0),className:c("w-full h-full transition-opacity duration-300",!y&&"opacity-0",y&&"opacity-100","cover"===g&&"object-cover","contain"===g&&"object-contain","fill"===g&&"object-fill","none"===g&&"object-none","scale-down"===g&&"object-scale-down")}),b&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded",children:i.jsx("span",{className:"text-sm text-gray-500",children:"Imagem não disponível"})})]})},j=({src:e="https://res.cloudinary.com/dqljyf76t/image/upload/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:s="Logo Gisele Galvão",className:a="h-14 mx-auto",style:t,priority:l=!0,width:r=200,height:o=100})=>i.jsx("div",{className:"flex justify-center items-center w-full",children:i.jsx(p,{src:e,alt:s,className:`${a} mx-auto`,style:t,priority:l,width:r,height:o,objectFit:"contain",quality:99})}),y=({logo:e="https://res.cloudinary.com/dqljyf76t/image/upload/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",logoAlt:s="Logo Gisele Galvão",title:a="Olá",primaryStyle:t,logoHeight:o=80,userName:m})=>{const{user:d}=l(),c=m||(null==d?void 0:d.userName)||"Visitante";return i.jsx(r,{className:"bg-white/95 shadow-md p-4 sm:p-6 md:p-8 mb-6 border border-[#B89B7A]/20",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-5 justify-between",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(j,{src:e,alt:s,className:"h-auto mx-auto md:mx-0",style:{height:`${o}px`,maxWidth:"100%"}})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-playfair text-[#432818]",children:[a," ",i.jsx("span",{className:"font-medium",children:c}),", seu Estilo Predominante é:"]}),t&&i.jsx("h2",{className:"font-bold text-[#B89B7A] mt-2 text-xl sm:text-2xl md:text-3xl",children:t.category})]})]})})},v=({secondaryStyles:e})=>i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("h3",{className:"text-xs font-medium text-[#432818] mb-1",children:"Estilos Complementares"}),i.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:e.slice(0,2).map((e=>i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[i.jsx("h4",{className:"text-xs text-[#432818]",children:e.category}),i.jsxs("span",{className:"text-2xs font-medium text-[#8F7A6A]",children:[e.percentage,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:i.jsx("div",{className:"bg-[#B89B7A] h-1 rounded-full",style:{width:`${e.percentage}%`}})})]})},e.category)))})]}),b=()=>{const e=s();return i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-[#fff9f7]",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("h1",{className:"text-2xl font-playfair text-[#432818] mb-4",children:"Oops, algo deu errado"}),i.jsx("p",{className:"text-[#432818] mb-6",children:"Não conseguimos carregar seu resultado do quiz. Por favor, tente novamente."}),i.jsx(n,{onClick:()=>e("/quiz"),className:"bg-[#aa6b5d] hover:bg-[#9a5b4d] text-white",children:"Refazer o Quiz"})]})})},w=({primaryStyle:e})=>{var s;const a=e&&(null==(s=g[e.category])?void 0:s.image),t=Math.round(320);return i.jsx("div",{className:"min-h-screen bg-[#fffaf7] p-4 md:p-6","aria-busy":"true",role:"status",children:i.jsxs("div",{className:"container mx-auto max-w-4xl",children:[i.jsx(r,{className:"p-4 sm:p-6 mb-4 sm:mb-6 bg-white relative overflow-hidden","aria-busy":"true",role:"status",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-5",children:[i.jsxs("div",{className:"w-36 sm:w-48 h-16 sm:h-20 relative flex justify-center items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md"}),i.jsx("div",{className:"flex justify-center w-full",children:i.jsx("img",{src:"https://res.cloudinary.com/dqljyf76t/image/upload/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:"Gisele Galvão",className:"h-12 sm:h-16 relative z-10 opacity-70 mx-auto",loading:"eager",fetchPriority:"high"})})]}),i.jsx("div",{className:"w-full max-w-xs sm:max-w-md h-6 sm:h-8 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md"})]})}),i.jsx(r,{className:"p-4 sm:p-6 mb-6 sm:mb-10 bg-white relative overflow-hidden",children:i.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 relative items-center",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-white/40 animate-pulse z-0"}),i.jsx("div",{className:"w-full h-6 sm:h-8 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md relative z-10"}),i.jsx("div",{className:"flex flex-col items-center w-full",children:i.jsx("div",{className:"flex justify-center w-full",children:a?i.jsx(h,{src:a,alt:`Estilo ${null==e?void 0:e.category}`,width:256,height:t,className:"w-full max-w-xs sm:max-w-sm md:max-w-md aspect-[4/5] object-cover rounded-md shadow-sm opacity-50 mx-auto",priority:!0}):i.jsx("div",{className:"w-full max-w-xs sm:max-w-sm md:max-w-md aspect-[4/5] flex items-center justify-center bg-gray-100/50 rounded-md shadow-sm mx-auto",children:i.jsx(h,{src:"https://res.cloudinary.com/dqljyf76t/image/upload/v1744911572/LOGO_DA_MARCA_GISELE_r14oz2.webp",alt:"Carregando...",width:140,height:70,className:"opacity-75 max-w-[70%]",objectFit:"contain",priority:!0})})})})]})}),i.jsx(r,{className:"p-4 sm:p-6 mb-6 sm:mb-10 bg-white relative overflow-hidden",children:i.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-3/4 h-6 sm:h-8 bg-gradient-to-r from-[#aa6b5d]/20 to-gray-100 animate-pulse rounded-md mx-auto mb-3 sm:mb-4"}),i.jsx("div",{className:"w-2/3 h-3 sm:h-4 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md mx-auto"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mt-3 sm:mt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 sm:h-4 w-14 sm:w-16 bg-gradient-to-r from-[#aa6b5d]/20 to-gray-100 animate-pulse rounded-md mx-auto"}),i.jsx("div",{className:"aspect-[3/4] bg-gradient-to-br from-gray-100 to-[#aa6b5d]/5 animate-pulse rounded-md"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 sm:h-4 w-14 sm:w-16 bg-gradient-to-r from-[#aa6b5d]/20 to-gray-100 animate-pulse rounded-md mx-auto"}),i.jsx("div",{className:"aspect-[3/4] bg-gradient-to-br from-gray-100 to-[#B89B7A]/10 animate-pulse rounded-md"})]})]}),i.jsx("div",{className:"flex justify-center gap-2 mt-3 sm:mt-4",children:[1,2,3].map((e=>i.jsx("div",{className:"w-1.5 sm:w-2 h-1.5 sm:h-2 rounded-full "+(1===e?"bg-[#aa6b5d]/50":"bg-gray-200")},e)))})]})}),i.jsx("div",{className:"space-y-6 sm:space-y-8",children:[1,2].map((e=>i.jsxs(r,{className:"p-4 sm:p-6 bg-white",children:[i.jsx("div",{className:"w-full h-6 sm:h-8 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md mb-4 sm:mb-6"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:[1,2,3].map((e=>i.jsx("div",{className:"h-24 sm:h-32 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md"},e)))})]},e)))}),i.jsx(r,{className:"p-4 sm:p-6 mt-6 sm:mt-8 bg-white",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4 sm:space-y-6",children:[i.jsx("div",{className:"w-full sm:w-3/4 h-6 sm:h-10 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-md"}),i.jsx("div",{className:"w-3/4 sm:w-1/2 h-12 sm:h-16 bg-gradient-to-r from-[#4CAF50]/20 to-[#45a049]/20 animate-pulse rounded-md"})]})})]})})};export{b as E,y as H,p as O,w as R,v as S,f as u};
